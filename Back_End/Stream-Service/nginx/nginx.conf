
events {
    worker_connections 1024;
}
# `http://localhost:9292/hls/${stream_ID}/master.m3u8`;

http {
    include       /etc/nginx/mime.types;                # ‚Üê Important: load standard MIME types
    default_type  application/octet-stream;

    # Override/add HLS-specific MIME types globally (correct place)
    types {
        application/vnd.apple.mpegurl m3u8;
        application/x-mpegURL m3u8;                 # Alternative common type
        video/mp2t ts;
    }

    sendfile        on;
    keepalive_timeout  65;

    # Recommended headers for HLS streaming
    add_header Cache-Control no-cache always;
    add_header Access-Control-Allow-Origin * always;
    add_header Access-Control-Allow-Headers * always;
    add_header Access-Control-Allow-Methods "GET, OPTIONS" always;

    server {
        listen 8080;

        # Serve HLS files from /data/hls
        location /hls/ {
            root /data;

            # Prevent directory listing
            autoindex off;

            # Extra safety for segment files
            expires -1;
        }

        # Optional: nice root page
        location / {
            return 200 "HLS Server is running!\nAccess your video at /hls/<videoId>/master.m3u8";
            add_header Content-Type text/plain;
        }
    }
}


